### Kafka
* `Kafka` - это распределённая платформа для потоковых данных и событий, которая также может использоваться в качестве системы очередей. Он предоставляет высокую пропускную способность и масштабируемость, что делает его подходящим для обработки больших объёмов данных и стриминга событий между сервисами.
* Основные компоненты:
    - `Broker` - хранит данные, управляет записью и чтением сообщений, а также обеспечивает масштабируемость и отказоустойчивость. Кластер Kafka состоит из одного или нескольких брокеров
    - `ZooKeeper` - используется для координации и управления брокерами и другими компонентами кластера
    - `Producer` - компонент, который отправляет (публикует) данные в Kafka, которые назваются сообщениями. Эти сообщения размещаются в топиках
    - `Consumer` - компонент, который читает (подписывается на) данные из Kafka. Потребители читают данные из топиков и обрабатывают их
    - `Consumer Group` - когда несколько потребителей одновременно считывают данные из одного топика, они могут быть объединены в группу потребителей. Каждый потребитель внутри группы получает уникальный поднабор партиций для чтения. Это позволяет горизонтально масштабировать обработку данных, т.к. можно добавлять новых потребителей без изменения самих приложений
    - `Topic` - категория (канал), в который `Producer` отправляют сообщения. `Producer` могут подписаться на `Topic` и читать сообщения из них
    - `Partitions (Партиции)` - каждый `Topic` разбивается на `Partitions` (расположенных на разных `Broker`s), что позволяет горизонтально масштабировать хранение и обработку данных. Каждое сообщение в `Topic` имеет ключ и попадает в одну из `Partition`.
    - `Offsets (Смещения)` - каждый `Consumer` в группе сохраняет смещение (`Offset`) последнего считанного сообщения в каждой `Partition`. `Offset` - это позиция в `Partition`, указывающая, с какого сообщения начать чтение. `Kafka` хранит позицию последнего прочитанного сообщения для каждого своего потребителя (или группы)
* Физическое представление компонентов `Kafka`:
    - `Topics` и `Partitions` - каждый `Topic` имеет одну или более `Partition`. `Partitions` - это логи событий, хранящие сообщения в порядке их добавления. `Partitions` обеспечивают масштабируемость и обработку данных в разных частях кластера.
    - `Физическая структура на диске` - для каждой `Partition` создаётся директория на файловой системе `Kafka` `Broker`. Внутри директории `Partitions` хранятся файлы данных, индексы и другие метаданные.
    - `Файл данных`- `log segment` - сообщения хранятся в файлах данных, называемых сегментами лога (`log segments`). В этом файле доступно только одно изменение - запись в конец файла, другие изменения не поддерживаются. Когда сегмент достигает определённого размера или времени жизни, он закрывается и новый сегмент открывается. Данные из `Kafka` удаляются целыми сегментами (например, по ttl или размеру `Topic`). Вы не можете удалить конкретное сообщение.
    - `Индексы` - каждый сегмент лога сопровождается индексом. Индексы позволяют быстро находить сообщения по их смещению и времени
    - `Сжатие` - `Kafka` поддерживает сжатие данных, чтобы экономить место на диске. Сжатые сегменты могут содержать больше данных, т.к. сообщения сжимаются перед записью.
    - `Удаление данных` - старые сегменты логов с сообщениями, которые больше не нужны, могут быть удалены. Удаление может происходить по времени или вручную.
